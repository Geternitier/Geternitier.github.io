

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon/yuanshen.jpeg">
  <link rel="icon" href="/image/icon/yuanshen.jpeg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#5a9367">
  <meta name="author" content="Geternitier">
  <meta name="keywords" content="">
  
    <meta name="description" content="长风破浪会有时，直挂云帆济沧海！">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机操作系统-第五章_文件管理">
<meta property="og:url" content="http://example.com/2023/05/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="Geternitier的博客">
<meta property="og:description" content="长风破浪会有时，直挂云帆济沧海！">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-05-05T04:00:00.000Z">
<meta property="article:modified_time" content="2023-06-20T10:02:35.183Z">
<meta property="article:author" content="Geternitier">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>计算机操作系统-第五章_文件管理 - Geternitier的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Geternitier的博客" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Geternitier的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/image/background/TheSpirits.webp') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计算机操作系统-第五章_文件管理"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-05-05 12:00" pubdate>
          2023年5月5日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.3k 字
        
      </span>
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">计算机操作系统-第五章_文件管理</h1>
            
            
              <div class="markdown-body">
                
                <p>长风破浪会有时，直挂云帆济沧海！</p>
<span id="more"></span>
<h1 id="第五章-文件管理">第五章 文件管理</h1>
<h2 id="文件系统概述">5.1 文件系统概述</h2>
<h3 id="文件的概念">5.1.1 文件的概念</h3>
<p>具有符号名的，在逻辑上具有完整意义的一组相关信息项的序列</p>
<p>文件名是由字母、数字和其他符号组成的一个字符串，其格式和长度因系统而异</p>
<h4 id="文件的命名">文件的命名</h4>
<ul>
<li>一般包括文件名和扩展名
<ul>
<li>前者用于识别文件，后者用于标识文件特性，两者用小数点隔开</li>
</ul></li>
<li>每个操作系统都有约定的扩展名，Windows系统中有：
<ul>
<li>.com表示可执行的二进制代码文件</li>
<li>.exe表示可执行的浮动二进制代码文件</li>
<li>.lib表示库程序文件</li>
<li>.bat表示批命令文件</li>
<li>.obj表示编译或汇编生成的目标文件</li>
</ul></li>
</ul>
<h4 id="文件的分类">文件的分类</h4>
<ul>
<li>按用途：系统文件、库文件、用户文件</li>
<li>按保护级别：只读文件、读写文件、不保护文件</li>
<li>按信息时限：临时文件、永久文件、档案文件</li>
<li>按设备类型：磁盘文件、磁带文件、光盘文件、软盘文件</li>
<li>还可以按文件的逻辑结构或物理结构分类</li>
</ul>
<h4 id="引入文件的优点">引入文件的优点</h4>
<ul>
<li>用户使用方便</li>
<li>文件安全可靠</li>
<li>文件可备份</li>
<li>文件可共享</li>
</ul>
<h3 id="文件系统及其功能">5.1.2 文件系统及其功能</h3>
<h4 id="文件系统的概念">文件系统的概念</h4>
<p>操作系统中负责存取和管理信息的模块，用统一方式管理用户和系统信息的存储、检索、更新、共享和保护，为用户提供一整套方便有效的文件使用和操作方法。</p>
<ul>
<li>文件系统中的文件和用户概念中的逻辑结构以及存储器中的存储结构密切相关，因此，同一个文件需要从逻辑文件和物理文件两个侧面观察。</li>
</ul>
<h4 id="文件系统的功能">文件系统的功能</h4>
<p>文件系统面向用户的功能：</p>
<ul>
<li>文件的按名存取</li>
<li>文件的共享和保护</li>
<li>文件的操作和使用</li>
</ul>
<p>为了实现这些功能，操作系统必须考虑：</p>
<ul>
<li>文件目录的建立和维护</li>
<li>存储空间的分配和回收</li>
<li>数据的保密和保护</li>
<li>监督用户存取和修改文件的权限</li>
<li>实现在不同存储介质上信息的表示方式、编址方式、存储次序，以及信息检索等问题</li>
</ul>
<h4 id="文件系统的组成">文件系统的组成</h4>
<pre><code class=" mermaid">graph
文件系统---文件的组织---组织方法---逻辑结构:\n流式文件\n记录式文件
组织方法---物理结构:\n顺序文件\n连接文件\n直接文件\n索引文件
文件系统---文件的存取---存取方法:\n顺序存取\n索引存取\n
文件系统---文件的控制---控制系统:\n逻辑控制系统\n物理控制系统
文件系统---文件的使用---文件操作:\n打开\n关闭\n读\n写\n控制
</code></pre>
<h2 id="文件的组织">5.2 文件的组织</h2>
<h3 id="文件的存储">5.2.1 文件的存储</h3>
<h4 id="卷和块">卷和块</h4>
<p>文件存储介质有磁带、光盘和磁盘。</p>
<ul>
<li>卷是存储介质的物理单位，对应于一盘磁带、一块软盘、一片光盘、一个硬盘分区</li>
<li>块是存储介质上连续信息所组成的一个区域，也称为物理记录
<ul>
<li>块是主存储器和辅助存储器进行信息交换的物理单位，每次总是交换一块或整数块信息</li>
<li>决定块的大小要考虑用户使用方式、数据传输效率和存储设备类型等因素</li>
<li>不同类型的存储介质，块的长短常常不同；对同一类型的存储介质，块的大小一般相同，但也可以不同</li>
<li>外围设备由于机械动作或识别不同块的要求，两个相邻块之间必须留有间隙，间隙是块之间不记录用户代码信息的区域</li>
</ul></li>
</ul>
<h4 id="顺序存取存储设备的信息安排">顺序存取存储设备的信息安排</h4>
<p>顺序存储设备是严格依赖信息的物理位置次序进行定位和读写的存储设备。</p>
<ul>
<li>磁带是最常用的一种顺序存取存储设备，它具有存储容量大、稳定可靠、卷可装卸和易于保存等优点，广泛用于存档
<ul>
<li>磁带的突出特点是块长的变化范围较大，块可以很小，也可以很大，原则上没有限制</li>
</ul></li>
<li>光盘也是一种顺序存取存储设备</li>
</ul>
<h4 id="直接存取存储设备的信息安排">直接存取存储设备的信息安排</h4>
<p>磁盘是一种直接存取存储设备，又称为随机存取存储设备。 -
移臂与旋转两维组织，存取速度高 -
每个物理地址有确定的位置和唯一的地址，存取任何一个物理块所需的时间几乎不依赖于此信息的位置</p>
<h3 id="文件的逻辑结构">5.2.2 文件的逻辑结构</h3>
<p>逻辑文件，又称为文件的逻辑结构。</p>
<ul>
<li>独立于物理环境的，用户概念中的抽象信息组织方式</li>
<li>用户能观察到并加以处理的数据集合</li>
</ul>
<p>文件的逻辑结构分为两种：流式文件和记录式文件。</p>
<h4 id="流式文件">流式文件</h4>
<p>文件内的数据不再组成记录，只是由一串依次的字节组成的信息流序列。</p>
<ul>
<li>这种文件常常按长度来读取所需信息，也可以用插入的特殊字符作为分界。</li>
</ul>
<h4 id="记录式文件">记录式文件</h4>
<p>一种有结构的文件，是若干逻辑记录信息所组成的记录流文件。</p>
<ul>
<li>逻辑记录是文件中按信息在逻辑上的独立含义所划分的信息单位</li>
</ul>
<p>记录式文件与数据库</p>
<ul>
<li>数据库管理系统也支持逻辑记录</li>
<li>有别于记录式文件的是，数据库中的记录之间可以通过数据冗余构成某种联系</li>
<li>数据库管理系统支持基于联系的数据查询，文件系统则不行</li>
</ul>
<h4 id="记录的成组与分解">记录的成组与分解</h4>
<p>一个物理记录只存放一个逻辑记录可能造成极大的浪费。</p>
<p>若干个逻辑记录合并成一组，写入一个块，称为记录的成组。</p>
<ul>
<li>每块中的逻辑记录数称为块因子</li>
</ul>
<p>对于流式文件，一个物理记录可以存放很多个连续字节</p>
<h5 id="成组与分解操作">成组与分解操作</h5>
<ol type="1">
<li>系统设置独立于用户数据区的输入/输出缓冲区</li>
<li>记录的成组操作在输出缓冲区内进行，凑满一块后才将缓冲区内的信息写到存储介质上</li>
<li>当存储介质上的一个物理记录读进输入缓冲区后，把逻辑记录从块中分离出来的操作称为记录的分解操作</li>
</ol>
<p>成组与分解的特征：</p>
<ul>
<li>优点：记录成组与分解节省存储空间，减少输入/输出操作次数，提高系统效率</li>
<li>提前读与推迟写
<ul>
<li>提前读：用户读请求，导致包含该逻辑记录的物理块读如输入缓冲区，这一操作可能读入了多个逻辑记录</li>
<li>推迟写：用户写请求，首先是写入输出缓冲区，只有当该缓冲区中的逻辑记录满后才会引起实际输出</li>
</ul></li>
</ul>
<h3 id="文件的物理结构">5.2.3 文件的物理结构</h3>
<p>文件的物理结构和组织是指文件在物理存储空间中的存放方法和组织关系，又称为物理文件。</p>
<ul>
<li>文件的存储结构涉及块的划分、记录的排列、索引的组织、信息的搜索等问题</li>
<li>直接影响文件系统性能</li>
</ul>
<h4 id="顺序文件">顺序文件</h4>
<p>将一个文件中逻辑上连续的信息存放到存储介质的依次相邻的块中形成顺序结构，这类文件称为顺序文件，也称连续文件。</p>
<ul>
<li><p>例：磁带文件、光盘文件</p></li>
<li><p>优点：顺序存取记录时速度较快</p>
<ul>
<li>常用于批处理文件和系统文件</li>
<li>采用磁带存放顺序文件，总可以保持快速存取存储的优点</li>
</ul></li>
<li><p>缺点：建立文件前需要能预先确定文件长度以便分配存储空间；修改、插入和增加文件记录有困难</p></li>
</ul>
<h4 id="连接文件">连接文件</h4>
<p>连接文件又称串联文件，使用连接字来表示文件中各个物理块之间的先后次序。</p>
<ul>
<li><p>第一块文件信息的物理地址由文件目录给出，每一块的连接字指出了文件的下一个物理块位置，连接字内容为0时，表示文件至本块结束。</p></li>
<li><p>输入井、输出井都是连接文件</p></li>
<li><p>优点：易于对文件记录做增、删、改，易于动态增长记录；不必预先确知文件长度；存储空间利用率高</p></li>
<li><p>缺点：存放指针需要额外的存储空间，由于存取需通过缓冲区，待获得连接字后，才能找到下一物理块的地址，因而仅适用于顺序存取</p></li>
</ul>
<h4 id="直接文件">直接文件</h4>
<p>直接文件又称散列文件，通过计算记录的关键字建立与其物理存储地址之间的对应关系，这种变换通常采用散列。</p>
<ul>
<li>计算寻址结构可能出现冲突，解决办法有拉链法、循环探查法、二次散列法、溢出区法等</li>
</ul>
<h4 id="索引文件">索引文件</h4>
<p>索引文件为每个文件建立了一张索引表，其中每个表目包含一个记录的键（逻辑记录号）及其存储地址。</p>
<ul>
<li>索引表的地址可由文件目录指出，查阅索引表先找到相应记录键，然后获得数据存储地址</li>
</ul>
<p>访问方式：</p>
<ul>
<li>索引文件在文件存储器上分为索引区和数据区</li>
<li>访问索引文件的两步操作：查找索引表，获得记录的物理地址</li>
<li>需要两次访问辅助存储器，若文件索引表已预先掉入主存储器，可减少一次内外存信息交换</li>
</ul>
<p>索引结构时连接结构的一种扩展，克服了连接文件只能作顺序存取的缺点，但增加了索引表的空间开销和查找时间。</p>
<p>索引表的组织：一级索引、二级索引、多级索引</p>
<h2 id="文件目录">5.3 文件目录</h2>
<h3 id="文件目录结构">5.3.1 文件目录结构</h3>
<p>文件目录是实现文件的按名存取的关键数据结构。</p>
<ul>
<li>文件系统的基本功能之一就是负责文件目录的建立、维护和检索，要求编排的目录便于查找、防止冲突</li>
<li>文件目录需要永久保存，因此也组织成文件存放在磁盘上</li>
</ul>
<h4 id="一级目录结构">一级目录结构</h4>
<p>在操作系统中构造一张线性表，与每个文件的相关属性占一个目录项，构成一级目录结构</p>
<ul>
<li>由于用户与文件众多，容易重名，不利于记忆</li>
</ul>
<h4 id="二级目录结构">二级目录结构</h4>
<ul>
<li>第一级为主文件目录，用于管理所有用户文件目录，目录项登记系统接受的用户名和该用户文件目录的地址</li>
<li>第二级为用户文件目录，为该用户的每个文件保存一个登记栏，内容与一级目录的目录项相同</li>
<li>每个用户只允许查看自己的文件目录</li>
</ul>
<p>二级目录结构的特点：</p>
<ul>
<li>可以检查访问文件者的存取权限，实现对文件的保密和保护</li>
<li>对同一个用户而言，依然存在文件多、易重名的问题</li>
</ul>
<h4 id="树形目录结构">树形目录结构</h4>
<p>每一级目录可以登记下一级目录，也可以登记文件，形成层次文件目录结构，一般采用树形目录结构，根是根目录，非叶节点为子目录，叶节点为文件</p>
<ul>
<li>较好地反映现实世界中具有层次关系的数据集合，较准确地反映系统内部文件的组织结构</li>
<li>不位于同一末端子目录的不同文件可以重名</li>
<li>易于规定不同层次货子树中文件的不同存取权限，便于文件的保护、保密和共享</li>
</ul>
<p>树形目录结构的文件定位</p>
<ul>
<li>一个文件的全名包括从根目录到文件为止的所有子目录路径</li>
<li>各子目录名间用文件分隔符分开</li>
<li>一个硬盘分区组织成一棵子树
<ul>
<li>每棵子树对应一个逻辑盘符（Windows）</li>
<li>众多子树嫁接成一棵大树（UNIX）</li>
</ul></li>
</ul>
<h3 id="文件目录的管理">5.3.2 文件目录的管理</h3>
<h4 id="文件查找">文件查找</h4>
<p>系统跟去用户提供的文件路径（绝对/相对）搜索各级文件目录，找到文件。</p>
<ul>
<li>现代操作系统都有改变工作目录的命令。</li>
</ul>
<h4 id="目录项查找">目录项查找</h4>
<p>搜索具体目录项时，可以采用顺序查找法或二分查找、杂凑法等方式查找。</p>
<ul>
<li>目录项按一定顺序编排时可用二分查找</li>
<li>杂凑法，把每个文件名经过变换函数变换成唯一的目录表表项。</li>
</ul>
<h4 id="活动文件表">活动文件表</h4>
<ul>
<li><p>树形目录结构存在的问题：一个文件经过许多目录节点时，使用不方便，系统在沿路径查找目录时，要多次访问文件存储器，使访问速度大大减慢。</p></li>
<li><p>若将所有文件的目录都复制到主存，访问速度加快但主存开销大。</p></li>
<li><p>一种办法是，把常用的和正在使用的文件目录复制进主存</p></li>
</ul>
<p>系统为每个用户进程建立一张活动文件表，用户使用一个文件前，先通过打开操作，把该文件有关目录信息复制到指定主存区域，有关信息填入活动文件表，以建立用户进程和该文件索引的联系。</p>
<p>不再使用该文件时，使用关闭操作，切断用户进程和这个文件的联系，同时若该目录已被修改过，更新辅存中对应的文件目录。</p>
<h2 id="文件的共享保护和保密">5.4 文件的共享、保护和保密</h2>
<p>文件是计算机系统的重要资源，文件系统需要具有保障文件安全的手段，提供文件保密的措施，有效实现文件共享。</p>
<ul>
<li>文件共享是指不同用户共同使用某些文件</li>
<li>文件保护是指防止文件被破坏</li>
<li>文件保密是指防止文件及其内容被其他用户窃取</li>
</ul>
<h3 id="文件的共享">5.4.1 文件的共享</h3>
<p>文件共享是计算机用户完成共同任务所必需的。</p>
<ul>
<li>好处：减少用户大量重复性劳动；免除系统复制文件的工作；节省文件占用的存储空间；减少程序设计输入/输出文件的次数</li>
</ul>
<p>文件共享的并发控制：</p>
<ul>
<li>在允许文件共享的系统中，操作系统应提供手段实现对共享文件的同步控制</li>
<li>多个进程可能同时存取一个文件如果它们同时进行读操作，操作系统应对文件进行公用控制</li>
<li>如果有进程进行写操作，操作系统须提供同步控制机制以保证文件数据完整性</li>
</ul>
<p>文件的保密：</p>
<ul>
<li>文件保密是指文件及其内容不能被未经文件主授权的其他用户窃取</li>
<li>保密措施：
<ul>
<li>隐蔽文件目录</li>
<li>设置口令</li>
<li>使用密码</li>
</ul></li>
</ul>
<h3 id="文件的保护">5.4.2 文件的保护</h3>
<p>文件保护是指防止文件被破坏。操作系统须提供文件保护机制，实现文件完整性。</p>
<p>常见的文件保护方法：文件副本；文件存取矩阵；文件属性</p>
<h4 id="文件副本">文件副本</h4>
<p>文件系统必须要有防止硬软件故障，保存信息完整性的能力，文件副本是主要实现机制。</p>
<ul>
<li>动态多副本技术</li>
<li>转储、备份和恢复</li>
</ul>
<h5 id="动态多副本">动态多副本</h5>
<p>在多个介质上维持同一内容的文件，在更新内容时同时进行。</p>
<p>增加了设备费用和系统负载，一般适用于容量较小且较为重要的文件，当文件发生故障时只需切换到备用设备即可。</p>
<p>一般适用于不需更新的系统文件及专用文件，</p>
<h5 id="文件转储">文件转储</h5>
<p>定时将文件复制转储到其他介质上，当某介质上出现故障时，复原转储文件。</p>
<p>转储的两种方式：</p>
<ul>
<li>一，一定时间间隔或一个单位处理结束时，系统自动复写更新过的文件和数据</li>
<li>二，每天或每周把文件信息全部复写，需要时再通过装入转储文件来恢复系统</li>
</ul>
<h4 id="文件的存取控制矩阵">文件的存取控制矩阵</h4>
<p>系统为每个用户设置访问每个文件对象的存取属性，则全部用户对全部文件的存取属性就组成一个二维矩阵，称为存取控制矩阵。</p>
<ul>
<li>由于操作系统具有很多用户和众多文件，存取控制矩阵是一个稀疏矩阵，可以将其简化为一张存取控制表
<ul>
<li>每行包括：用户、文件、存取属性</li>
<li>仅登记那些对文件拥有存取属性的部分</li>
</ul></li>
</ul>
<p>基于存取控制矩阵/表的文件保护：</p>
<ul>
<li>存取属性：可以有访问、读、写、执行、创建、删除、授权等</li>
<li>系统通过查阅矩阵/表核对用户对文件的存取权限</li>
<li>文件主通过命令进行授权甚至授权权的转授</li>
<li>系统管理用户等同于文件主权限，获得对系统文件的授访问权权限</li>
</ul>
<h4 id="文件属性">文件属性</h4>
<p>存取控制表的一种简化方法是用户分类，再针对每类用户规定文件属性。</p>
<ul>
<li>用户分类：属主、合作者、其他</li>
<li>文件属性：读、写、执行</li>
<li>文件属性可以放在文件目录项中，管理大为简化</li>
<li>用户使用文件时，通过核对文件属性，实现保护</li>
</ul>
<h2 id="文件的使用">5.5 文件的使用</h2>
<h3 id="文件存取方法">5.5.1 文件存取方法</h3>
<p>文件存取方法是操作系统为用户程序提供的使用文件的技术和手段，在某种程度上依赖于文件的物理结构。</p>
<h4 id="顺序存取">顺序存取</h4>
<p>按记录顺序进行读写操作的存取方法。</p>
<ul>
<li>读操作根据读指针读出当前记录，同时推进读指针，指向下一次要读出的记录</li>
<li>写操作则设置写指针，把一个记录写到文件末端，同时推进写指针</li>
<li>允许对读指针进行前进或后退整数个记录的操作</li>
</ul>
<h4 id="直接存取">直接存取</h4>
<p>快速地以任意次序直接读写某个记录。</p>
<h4 id="索引存取">索引存取</h4>
<p>基于索引文件的索引存取方法。</p>
<ul>
<li>信息块的地址可以通过查找记录键换算出</li>
<li>也可以采用顺序存取或直接存取的方法</li>
<li>实际都采用多级索引加速记录查找</li>
</ul>
<h3 id="文件的使用-1">5.5.2 文件的使用</h3>
<p>用户通过两类接口与文件系统联系。</p>
<ul>
<li>一类是与文件有关的操作命令</li>
<li>另一类是提供给用户程序的文件类系统调用，如下</li>
</ul>
<h4 id="建立文件">建立文件</h4>
<p>参数：文件名、设备类、文件属性及存取控制信息</p>
<p>流程：在相应设备上建立一个文件目录项，分配第一个物理块，在活动文件表中申请一个项，登记有关目录信息，返回一个文件句柄。</p>
<h4 id="撤销文件">撤销文件</h4>
<p>参数：文件名、设备类</p>
<p>流程：若文件未关闭，先关闭文件；若为共享文件，进行联访处理；在目录文件中删除对应目录项，释放文件占用的文件存储空间</p>
<h4 id="打开文件">打开文件</h4>
<p>参数：文件名、设备类、打开方式</p>
<p>流程：在主存活动文件表中申请一个项，返回一个文件句柄；跟踪文件名查找目录文件，把目录信息复制到活动文件表相应栏，按存取控制说明检查访问的合法性；对共享文件进行相应的额外处理</p>
<h4 id="关闭文件">关闭文件</h4>
<p>参数：文件句柄</p>
<p>流程：将活动文件表中该文件的当前使用用户数减一，若此值为0，则收回此活动文件表，完成推迟写；若活动文件表目内容已被改过，则应先将表目内容写回文件存储器上相应表目中，使文件目录保存最新状态。</p>
<h4 id="读写文件">读写文件</h4>
<p>参数：文件句柄、用户数据区地址、读写的记录或字节数</p>
<p>按文件句柄从活动文件表中找到该目录的目录项信息；根据目录项指出的该文件逻辑和物理组织方式，把相关逻辑记录转换成物理块</p>
<h4 id="定位文件">定位文件</h4>
<p>调整所打开文件的读写指针位置</p>
<p>参数：文件句柄，定位指针</p>
<h2 id="文件系统的实现">5.6 文件系统的实现</h2>
<h3 id="辅存空间管理">1. 辅存空间管理</h3>
<h4 id="辅存空间的分配方式">辅存空间的分配方式</h4>
<ul>
<li>连续分配：存放在辅存空间连续存储区中（连续的存储块号）
<ul>
<li>优点是顺序访问速度快，管理简单</li>
<li>为了获得足够大的连续存储区，需要定时进行碎片整理</li>
</ul></li>
<li>非连续分配：动态分配给若干扇区或簇，不要求连续
<ul>
<li>辅存空间管理效率高，便于文件动态增长和收缩</li>
</ul></li>
</ul>
<h4 id="空闲块的管理">空闲块的管理</h4>
<h5 id="位示图">位示图</h5>
<p>使用若干字节构成一张表，表中每一字位对应一个物理块，字位的顺序和块的相对次序一致，字位为1表示相应块已占用，字位为0表示该块空闲。</p>
<p>优点：可以把位示图全部或大部分保存在主存中，配合位操作指令实现高速物理块分配与去配。</p>
<h5 id="空闲块成组连接法">空闲块成组连接法</h5>
<h3 id="文件系统的实现层次">2. 文件系统的实现层次</h3>
<ul>
<li>用户接口：接受用户发来的系统调用，进行语法检查，进入逻辑文件控制子系统</li>
<li>逻辑文件控制子系统：根据文件路径名，搜索文件目录，建立活动文件表，根据文件结构和存取方法，把逻辑记录转换成相对物理块号和块内相对地址</li>
<li>文件保护子系统：识别调用者身份，验证存取权限，判定本次文件操作的合法性</li>
<li>物理文件控制子系统：实现缓冲区管理，根据物理结构，将对应相对物理块号转换为实际物理块号，负责文件存储空间的分配，生存输入/输出控制系统调用形式</li>
<li>输入/输出控制子系统：执行具体的物理块输入/输出操作</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="category-chain-item">计算机操作系统</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/05/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E5%B9%B6%E5%8F%91%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" title="计算机操作系统-第六章_并发程序设计">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计算机操作系统-第六章_并发程序设计</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/05/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/" title="计算机操作系统-第四章_设备管理">
                        <span class="hidden-mobile">计算机操作系统-第四章_设备管理</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.events.registerRefreshCallback(function() {
      if ('mermaid' in window) {
        mermaid.init();
      }
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <p>长风破浪会有时，直挂云帆济沧海</p> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
